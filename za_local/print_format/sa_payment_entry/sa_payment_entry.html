{%- set company_doc = frappe.get_doc("Company", doc.company) -%}

<style>
	.sa-payment {
		font-family: Arial, Helvetica, sans-serif;
		font-size: 11pt;
		line-height: 1.5;
		color: #000;
	}
	.sa-payment .header {
		margin-bottom: 30px;
		border-bottom: 2px solid #27ae60;
		padding-bottom: 15px;
	}
	.sa-payment .company-logo {
		max-width: 200px;
		max-height: 80px;
		margin-bottom: 10px;
	}
	.sa-payment .company-name {
		font-size: 18pt;
		font-weight: bold;
		color: #27ae60;
		margin-bottom: 5px;
	}
	.sa-payment .payment-title {
		font-size: 24pt;
		font-weight: bold;
		text-align: center;
		color: #27ae60;
		margin: 20px 0;
		text-transform: uppercase;
	}
	.sa-payment .section-label {
		font-weight: bold;
		font-size: 10pt;
		color: #74808b;
		text-transform: uppercase;
		margin-bottom: 8px;
	}
	.sa-payment .payment-details {
		background-color: #f9f9f9;
		border: 2px solid #27ae60;
		padding: 20px;
		margin: 20px 0;
		border-radius: 5px;
	}
	.sa-payment table.refs {
		width: 100%;
		border-collapse: collapse;
		margin: 20px 0;
	}
	.sa-payment table.refs th {
		background-color: #27ae60;
		color: white;
		padding: 10px;
		text-align: left;
		font-weight: bold;
		border: 1px solid #229954;
	}
	.sa-payment table.refs td {
		padding: 8px 10px;
		border: 1px solid #ddd;
	}
	.sa-payment table.refs tr:nth-child(even) {
		background-color: #f9f9f9;
	}
	.sa-payment .text-right {
		text-align: right;
	}
	.sa-payment .text-center {
		text-align: center;
	}
	.sa-payment .amount-box {
		background-color: #27ae60;
		color: white;
		padding: 20px;
		text-align: center;
		font-size: 18pt;
		font-weight: bold;
		margin: 20px 0;
		border-radius: 5px;
	}
	.sa-payment .footer {
		margin-top: 40px;
		padding-top: 20px;
		border-top: 2px solid #27ae60;
	}
	@media print {
		.sa-payment {
			font-size: 10pt;
		}
	}
</style>

<div class="sa-payment">
	<!-- Header Section -->
	<div class="header">
		<table style="width: 100%; border: none;">
			<tr>
				<td style="width: 50%; vertical-align: top; border: none;">
					{% if company_doc.company_logo %}
					<img src="{{ company_doc.company_logo }}" class="company-logo" alt="{{ company_doc.name }}">
					{% endif %}
					<div class="company-name">{{ company_doc.name }}</div>
					<div>{{ company_doc.address_line1 or "" }}</div>
					{% if company_doc.address_line2 %}
					<div>{{ company_doc.address_line2 }}</div>
					{% endif %}
					<div>{{ company_doc.city or "" }}{% if company_doc.state %}, {{ company_doc.state }}{% endif %} {{ company_doc.pincode or "" }}</div>
				</td>
				<td style="width: 50%; vertical-align: top; text-align: right; border: none;">
					{% if company_doc.tax_id %}
					<div class="section-label">VAT Number</div>
					<div style="font-weight: bold;">{{ company_doc.tax_id }}</div>
					{% endif %}
				</td>
			</tr>
		</table>
	</div>

	<!-- Payment Title -->
	<div class="payment-title">{{ doc.payment_type }} RECEIPT</div>

	<!-- Payment Details Box -->
	<div class="payment-details">
		<table style="width: 100%; border: none;">
			<tr>
				<td style="width: 50%; border: none; padding: 8px;">
					<div class="section-label">Receipt Number:</div>
					<div style="font-size: 14pt; font-weight: bold;">{{ doc.name }}</div>
				</td>
				<td style="width: 50%; border: none; padding: 8px;">
					<div class="section-label">Date:</div>
					<div style="font-size: 14pt; font-weight: bold;">{{ doc.get_formatted("posting_date") }}</div>
				</td>
			</tr>
			<tr>
				<td style="border: none; padding: 8px;">
					<div class="section-label">{{ "Received From:" if doc.payment_type == "Receive" else "Paid To:" }}</div>
					<div style="font-size: 12pt; font-weight: bold;">{{ doc.party_name or doc.party }}</div>
				</td>
				<td style="border: none; padding: 8px;">
					<div class="section-label">Mode of Payment:</div>
					<div style="font-size: 12pt; font-weight: bold;">{{ doc.mode_of_payment or "Not Specified" }}</div>
				</td>
			</tr>
			{% if doc.reference_no %}
			<tr>
				<td style="border: none; padding: 8px;">
					<div class="section-label">Reference / Cheque No:</div>
					<div style="font-weight: bold;">{{ doc.reference_no }}</div>
				</td>
				<td style="border: none; padding: 8px;">
					<div class="section-label">Reference Date:</div>
					<div style="font-weight: bold;">{{ doc.get_formatted("reference_date") if doc.reference_date else "N/A" }}</div>
				</td>
			</tr>
			{% endif %}
		</table>
	</div>

	<!-- Amount Box -->
	<div class="amount-box">
		AMOUNT: {{ doc.get_formatted("paid_amount") }} {{ doc.paid_to_account_currency or doc.currency }}
	</div>

	{% if doc.references %}
	<!-- References Table -->
	<div class="section-label" style="margin-top: 30px;">Payment Applied To:</div>
	<table class="refs">
		<thead>
			<tr>
				<th style="width: 5%;" class="text-center">No.</th>
				<th style="width: 20%;">Reference Type</th>
				<th style="width: 30%;">Reference Name</th>
				<th style="width: 20%;" class="text-right">Total Amount</th>
				<th style="width: 25%;" class="text-right">Allocated Amount</th>
			</tr>
		</thead>
		<tbody>
			{% for ref in doc.references %}
			<tr>
				<td class="text-center">{{ loop.index }}</td>
				<td>{{ ref.reference_doctype }}</td>
				<td><strong>{{ ref.reference_name }}</strong></td>
				<td class="text-right">{{ ref.get_formatted("total_amount") }}</td>
				<td class="text-right"><strong>{{ ref.get_formatted("allocated_amount") }}</strong></td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
	{% endif %}

	<!-- Footer Section -->
	<div class="footer">
		{% if doc.remarks %}
		<div style="margin-bottom: 15px;">
			<div class="section-label">Remarks:</div>
			<div>{{ doc.remarks }}</div>
		</div>
		{% endif %}

		<div style="margin-top: 40px;">
			<table style="width: 100%; border: none;">
				<tr>
					<td style="width: 50%; border: none;">
						<div style="border-top: 1px solid #000; margin-top: 50px; padding-top: 5px; text-align: center;">
							Prepared By
						</div>
					</td>
					<td style="width: 50%; border: none;">
						<div style="border-top: 1px solid #000; margin-top: 50px; padding-top: 5px; text-align: center;">
							Authorized Signature
						</div>
					</td>
				</tr>
			</table>
		</div>

		<div style="margin-top: 20px; font-size: 9pt; color: #999; text-align: center;">
			This is a computer-generated receipt. No signature is required.
		</div>
	</div>
</div>

